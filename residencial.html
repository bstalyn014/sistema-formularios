<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis Residencial</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="app-icon.png">
    <link rel="icon" type="image/png" href="app-icon.png">
    <meta name="theme-color" content="#f8fafc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div id="formulario-residencial" class="formulario active">
            <header>
                <h1>Formulario Residencial</h1>
                <p>Complete todos los campos requeridos para el an√°lisis de consumo</p>
                <a href="analisis.html" class="btn-volver">‚Üê Volver al Men√∫ An√°lisis</a>
            </header>
            
            <form id="formResidencial">
                <div class="form-section">
                    <h2>Datos B√°sicos</h2>
                    
                    <div class="form-group">
                        <label for="res-contrato" class="required">Contrato</label>
                        <input type="number" id="res-contrato" name="contrato" required placeholder="Ingrese el n√∫mero de contrato">
                    </div>
                    
                    <div class="form-group">
                        <label for="res-servicio" class="required">Servicio</label>
                        <select id="res-servicio" name="servicio" required>
                            <option value="">Seleccione una opci√≥n</option>
                            <option value="Activo">Activo</option>
                            <option value="Suspendido">Suspendido</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Estado del medidor</label>
                        <div class="radio-group">
                            <label><input type="radio" name="estado_medidor" value="Buen estado" required> Buen estado</label>
                            <label><input type="radio" name="estado_medidor" value="Mal estado" required> Mal estado</label>
                            <label><input type="radio" name="estado_medidor" value="Visor Derio" required> Visor Derio</label>
                            <label><input type="radio" name="estado_medidor" value="Paralizado" required> Paralizado</label>
                            <label><input type="radio" name="estado_medidor" value="Otro" required> Otro</label>
                        </div>
                        
                        <div id="res-estado-medidor-otro-field" class="conditional-field">
                            <label for="res-estado-medidor-otro">Especifique el estado del medidor:</label>
                            <input type="text" id="res-estado-medidor-otro" name="estado_medidor_otro" placeholder="Ingrese el estado del medidor">
                        </div>
                        
                        <div id="res-cadena-custodio" class="conditional-field">
                            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 3px solid #f39c12; margin-top: 10px;">
                                <label for="res-numero-modificacion">Se realiza cadena de custodio, n√∫mero de sello, se modifica n√∫mero</label>
                                <input type="number" id="res-numero-modificacion" name="numero_modificacion" 
                                    placeholder="00" style="width: 100px; margin: 0 5px;">
                                por revisi√≥n de medida, se instala medidor
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="res-lectura-m3" class="required">Lectura (m¬≥)</label>
                        <input type="number" id="res-lectura-m3" name="lectura_m3" required placeholder="Ingrese la lectura en m¬≥">
                    </div>
                    
                    <div class="form-group">
                        <label for="res-lectura-litros">Lectura (litros)</label>
                        <input type="number" id="res-lectura-litros" name="lectura_litros" placeholder="Ingrese la lectura en litros">
                    </div>
                    
                    <div class="form-group">
                        <label for="res-descripcion" class="required">Descripci√≥n de casa</label>
                        <input type="text" id="res-descripcion" name="descripcion" required placeholder="Describa la vivienda">
                    </div>
                    
                    <div class="form-group">
                        <label for="res-personas" class="required">¬øCu√°ntas personas habitan en el predio?</label>
                        <input type="number" id="res-personas" name="personas" required placeholder="Ingrese el n√∫mero de personas">
                    </div>
                </div>
                
                <div class="form-section">
                    <h2>Informaci√≥n de Consumo</h2>
                    
                    <div class="form-group">
                        <label for="res-abastecimiento" class="required">¬øCu√°l es su tipo de abastecimiento?</label>
                        <select id="res-abastecimiento" name="abastecimiento" required>
                            <option value="">Seleccione una opci√≥n</option>
                            <option value="Directo">Directo</option>
                            <option value="Cisterna">Cisterna</option>
                            <option value="Tanque elevado">Tanque elevado</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <div id="res-abastecimiento-otro" class="conditional-field">
                            <label for="res-abastecimiento-otro-text">Especifique el tipo de abastecimiento</label>
                            <input type="text" id="res-abastecimiento-otro-text" name="abastecimiento_otro" placeholder="Ingrese el tipo de abastecimiento">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="required">¬øHa habido cambios en el n√∫mero de habitantes en los √∫ltimos 6-12 meses?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="cambios_habitantes" value="S√≠" required> S√≠</label>
                            <label><input type="radio" name="cambios_habitantes" value="No" required> No</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h2>Detecci√≥n de Fugas</h2>
                    
                    <div class="form-group">
                        <label class="required">¬øRegistra caudal de ingreso?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="caudal_ingreso" value="S√≠" required> S√≠</label>
                            <label><input type="radio" name="caudal_ingreso" value="No" required> No</label>
                        </div>
                        <div id="res-caudal-detalle" class="conditional-field">
                            <label for="res-caudal-cantidad">Cuantificar registro (Litros/min)</label>
                            <input type="number" id="res-caudal-cantidad" name="caudal_cantidad" placeholder="Ingrese los litros por minuto">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Usuario permite realizar prueba de consumo</label>
                        <div class="radio-group">
                            <label><input type="radio" name="prueba_consumo" value="S√≠" required> S√≠</label>
                            <label><input type="radio" name="prueba_consumo" value="No" required> No</label>
                        </div>
                        
                        <div id="res-prueba-no-detalle" class="conditional-field">
                            <label class="required">Especifique la raz√≥n:</label>
                            <div class="radio-group">
                                <label><input type="radio" name="prueba_razon" value="usuario ausente"> Usuario ausente</label>
                                <label><input type="radio" name="prueba_razon" value="usuario no permite el ingreso"> Usuario no permite el ingreso</label>
                                <label><input type="radio" name="prueba_razon" value="otra"> Otra</label>
                            </div>
                            
                            <div id="res-usuario-no-permite" class="conditional-field" style="margin-top: 10px;">
                                <label for="res-motivo-no-permite">Motivo:</label>
                                <input type="text" id="res-motivo-no-permite" name="motivo_no_permite" placeholder="Ingrese el motivo">
                            </div>
                            
                            <div id="res-otra-razon" class="conditional-field" style="margin-top: 10px;">
                                <label for="res-otra-razon-text">Especifique:</label>
                                <input type="text" id="res-otra-razon-text" name="otra_razon" placeholder="Ingrese la raz√≥n">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group" id="res-fugas-group">
                        <label class="required">¬øHa detectado problemas de fugas?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="fugas_detectadas" value="No se detecto" required> No se detect√≥</label>
                            <label><input type="radio" name="fugas_detectadas" value="Se detect√≥ fuga visible" required> Se detect√≥ fuga visible</label>
                            <label><input type="radio" name="fugas_detectadas" value="Se detect√≥ fuga no visible" required> Se detect√≥ fuga no visible</label>
                        </div>
                        
                        <div id="res-no-se-detecto" class="conditional-field">
                            <label for="res-puntos-agua-no">Se revisaron</label>
                            <input type="number" id="res-puntos-agua-no" name="puntos_agua_no" placeholder="00" min="1" max="99" style="width: 80px; display: inline-block; margin: 0 5px;">
                            puntos de agua y se identific√≥ que no existe fuga
                        </div>
                        
                        <div id="res-fuga-visible-detalle" class="conditional-field">
                            <label for="res-puntos-agua-si">Se revisaron</label>
                            <input type="number" id="res-puntos-agua-si" name="puntos_agua_si" placeholder="00" min="1" max="99" style="width: 80px; display: inline-block; margin: 0 5px;">
                            puntos de agua y se identific√≥ que existe fuga en:
                            <input type="text" id="res-ubicacion-fuga-detalle" name="ubicacion_fuga_detalle" placeholder="Describa la ubicaci√≥n de la fuga" style="margin-top: 10px;">
                        </div>
                        
                        <div id="res-recomendacion-fugas" class="info-message">
                            <strong>Recomendaci√≥n:</strong> Se recomienda al usuario el servicio de detecci√≥n y reparaci√≥n de fugas
                        </div>
                    </div>
                    
                    <div class="form-group" id="res-persona-atendio-group">
                        <label for="res-persona-atendio" class="required">Nombre de la persona que atendi√≥</label>
                        <input type="text" id="res-persona-atendio" name="persona_atendio" required placeholder="Ingrese el nombre completo">
                    </div>
                </div>

                <div class="form-section">
                    <h2>Observaci√≥n Final</h2>
                    <div class="form-group">
                        <label for="res-observacion">Observaci√≥n final</label>
                        <textarea id="res-observacion" name="observacion" rows="4" placeholder="Escriba cualquier observaci√≥n adicional"></textarea>
                    </div>
                </div>
                
                <div class="form-section">
                    <h2>Mantenimiento</h2>
                    <div class="form-group">
                        <div style="background-color: #e8f4fd; color: #0e4f88; padding: 12px 15px; border-left: 4px solid #3498db; border-radius: 5px; font-size: 15px;">
                            <strong>Se realiza mantenimiento liviano al medidor</strong>
                        </div>
                    </div>
                </div>

                <div class="buttons">
                    <button type="button" class="btn-submit" onclick="generarResumenResidencial()">Generar An√°lisis</button>
                    <!-- <button type="button" class="btn-guardar" onclick="guardarResidencialEnSheets()">üíæ Guardar en Google Sheets</button> -->
                </div>
            </form>
            
            <div id="resumen-residencial" class="resumen">
                <div class="success-message">
                    <h2>¬°An√°lisis Residencial Generado!</h2>
                    <p>El siguiente es el resumen del an√°lisis realizado:</p>
                </div>
                
                <h2>Resumen del An√°lisis Residencial</h2>
                <button id="copiar-resumen-residencial" class="btn-copiar">üìã Copiar Resumen</button>
                <div class="resumen-content" id="resumen-contenido-residencial"></div>
                
                <div class="buttons" style="margin-top: 20px;">
                    <a href="analisis.html" class="btn-volver">Volver al Men√∫ An√°lisis</a>
                    <button type="button" style="background-color: #0e4f88; margin-left: 10px;" onclick="volverAlFormulario('residencial')">Realizar Otro An√°lisis</button>
                </div>
            </div>
        </div>
    </div>
    <script src="js/common.js"></script>
    <script src="js/residencial.js"></script>
    <script src="js/googleSheets.js"></script>
</body>
</html>
